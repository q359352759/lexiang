<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="format-detection" content="telephone=no">
    <title>时间测试</title>
    <style type="text/css">
		.scroll{
            position: absolute;
            right: 0px;
            top: 300px;
            height: 100px;
            width: 100px;
            background: #cccccc;
	    }
    </style>
</head>
<body>

 
</body>
<script type="text/javascript">
function chGMT(gmtDate){  
    var mydate = new Date(gmtDate);  
        mydate.setHours(mydate.getHours() + 8);
    return mydate;
}
    function dateFtt(val, format , add_8){
    const REGEX = /(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/;
    if (val) {
        if (val.toString().indexOf("-") > 0) {
            val = val.replace(/T/g, " ").replace(/\.[\d]{3}Z/, "").replace(/(-)/g, "/"); // 将 '-' 替换成 '/'
            val = val.slice(0, val.indexOf(".")); // 删除小数点及后面的数字
        }
        // let date = chGMT(val);
        let date = new Date(val);
        console.log(date.getHours())
        // date.setHours(date.getHours() + 8);
        const [whole, yy, MM, dd, hh, mm, ss] = date.toISOString().match(REGEX);
        const year = new Date().getFullYear();
        const month = new Date().getMonth() + 1;
        const dates = new Date().getDate();
        if (format) {
            return format
                .replace("yyyy", yy)
                .replace("yy", yy.slice(2))
                .replace("MM", MM)
                .replace("dd", dd)
                .replace("hh", hh)
                .replace("mm", mm)
                .replace("ss", ss);
        } else {
            return [yy, MM, dd].join("-") + " " + [hh, mm, ss].join(":");
        }
    } else {
        return "--";
    }
}
//yyyy.MM.dd hh:mm
function 当前时间格式化(format,val){
    const REGEX = /(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/;
    if(val){
        var date = new Date(val);
    }else{
        var date = new Date();        
    }
        date.setHours(date.getHours() + 8);
    const [whole, yy, MM, dd, hh, mm, ss] = date.toISOString().match(REGEX);

    const year = new Date().getFullYear();
    const month = new Date().getMonth() + 1;
    const dates = new Date().getDate();
    if (format) {
        return format
            .replace("yyyy", yy)
            .replace("yy", yy.slice(2))
            .replace("MM", MM)
            .replace("dd", dd)
            .replace("hh", hh)
            .replace("mm", mm)
            .replace("ss", ss);
    } else {
        return [yy, MM, dd].join("-") + " " + [hh, mm, ss].join(":");
    }
}
console.log(dateFtt('2019-01-21T21:10:00','yyyy.MM.dd hh:mm'),dateFtt('2019-01-21T21:10:00','yyyy.MM.dd hh:mm'))
console.log(当前时间格式化('yyyy.MM.dd hh:mm','2019-01-21 21:10'))
var date=new Date();
console.log(date.getHours())


</script>
</html>